#!/bin/bash
# Unified Job Parameters - Chunk Size Comparison
# Purpose: Compare performance across different chunk sizes
# Compatible with: BenchFS, BeeOND, CHFS
# Expected duration: ~15 minutes for 4 nodes

# ============================================================
# Common IOR Parameters
# ============================================================

transfer_size_list=(
  4m    # 4 MiB - verified stable
)

block_size_list=(
  256m  # 256 MiB - moderate size for fair comparison
  512m  # 512 MiB
)

ppn_list=(
  1     # Single process to isolate chunk size impact
  4     # Multiple processes
)

ior_flags_list=(
  "-w -r -F"  # File per process
)

# ============================================================
# BenchFS-specific Parameters
# ============================================================

server_ppn_list=(
  1     # 1 server per node (default)
)

# Focus on chunk size comparison (supports k/m/g suffix)
benchfs_chunk_size_list=(
  1m    # 1 MiB - small chunks (high RPC overhead)
  4m    # 4 MiB - baseline
  16m   # 16 MiB - reduced overhead
  32m   # 32 MiB - maximum
  64m   # 64 MiB - experimental
)

# ============================================================
# CHFS-specific Parameters
# ============================================================

# Note: CHFS chunk size comparison requires multiple runs
CHFS_CHUNK_SIZE=4194304    # 4 MiB default
CHFS_PROTOCOL="sockets"
CHFS_DB_SIZE="10GB"
