#!/bin/bash
# BenchFS Job Parameters Configuration
#
# This file defines the default parameters for BenchFS benchmarking jobs.
# You can override these by setting PARAM_FILE environment variable
# to point to a custom configuration file.

# IOR Transfer sizes
# Controls how much data is transferred in each I/O operation
# NOTE: block_size must be a multiple of transfer_size
# NOTE: Using 4m transfer size which has been verified to work correctly.
#       Larger transfer sizes (16m, 32m) with equal block sizes can cause
#       UCX Active Message deadlocks.
transfer_size_list=(
  4m    # 4 MiB - verified working transfer size
)

# IOR Block sizes
# Defines the size of each block written per task
# NOTE: Must be a multiple of transfer_size (block_size >= transfer_size and block_size % transfer_size == 0)
# NOTE: Block size should be significantly larger than transfer size for stable operation.
block_size_list=(
  64m   # 64 MiB - verified working block size
  256m  # 256 MiB - moderate blocks (multiple of 4m)
  512m  # 512 MiB - large blocks (multiple of 4m)
  1g    # 1 GiB - very large blocks for maximum throughput (multiple of 4m)
)

# Processes per node
# Number of MPI processes to spawn on each compute node
# OPTIMIZED: Higher ppn values to maximize parallel I/O and network bandwidth utilization
ppn_list=(
  1
  2
  4
)

# IOR flags
# -w: write test
# -r: read test
# -F: file per process (each process writes to its own file)
ior_flags_list=(
  "-w -r -F"  # Separate files per process
  "-w -r"     # Shared file across all processes
)

# BenchFS chunk sizes (in bytes)
# Determines how data is divided into chunks for storage
# OPTIMIZED: Larger chunk sizes to reduce RPC overhead
benchfs_chunk_size_list=(
  4194304   # 4 MiB (baseline)
  16777216  # 16 MiB (recommended - reduces RPC overhead by 4x)
  33554432  # 32 MiB (maximum - reduces RPC overhead by 8x)
)
